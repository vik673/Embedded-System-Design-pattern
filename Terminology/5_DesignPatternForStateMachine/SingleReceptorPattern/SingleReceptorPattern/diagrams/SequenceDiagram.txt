Single Event Receptor Pattern - Sequence Diagrams
=================================================

OVERVIEW: This document illustrates the event flow and interactions in both
synchronous and asynchronous versions of the Single Event Receptor Pattern.

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

SYNCHRONOUS EVENT PROCESSING SEQUENCE
======================================

Description: Direct event processing with mutex protection for thread safety.
Events are processed immediately upon receipt.

Client              Mutex               SyncReceptor                State Machine
  â”‚                   â”‚                      â”‚                           â”‚
  â”‚                   â”‚                      â”‚                           â”‚
  â”‚ â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ INITIALIZATION â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º â”‚
  â”‚                   â”‚                      â”‚                           â”‚
  â”‚â”€â”€Create()â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                      â”‚                           â”‚
  â”‚                   â”‚                      â”‚                           â”‚
  â”‚                   â”‚â—„â”€â”€â”€â”€setItsMutex()â”€â”€â”€â”‚                           â”‚
  â”‚                   â”‚                      â”‚                           â”‚
  â”‚ â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ EVENT PROCESSING â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º â”‚
  â”‚                   â”‚                      â”‚                           â”‚
  â”‚â”€â”€createEvent(EVDIGIT,'1')â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                           â”‚
  â”‚                   â”‚                      â”‚                           â”‚
  â”‚â”€â”€eventDispatch(event)â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚                           â”‚
  â”‚                   â”‚                      â”‚                           â”‚
  â”‚                   â”‚â—„â”€â”€â”€â”€Mutex_lock()â”€â”€â”€â”€â”‚ ğŸ”’ CRITICAL SECTION      â”‚
  â”‚                   â”‚                      â”‚                           â”‚
  â”‚                   â”‚                      â”‚â”€â”€switch(e.eType)â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚
  â”‚                   â”‚                      â”‚                           â”‚
  â”‚                   â”‚                      â”‚â”€â”€switch(stateID)â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚
  â”‚                   â”‚                      â”‚                           â”‚
  â”‚                   â”‚                      â”‚â”€â”€exit_NoNumber()â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚
  â”‚                   â”‚                      â”‚   [stateID: NONUMBER]     â”‚
  â”‚                   â”‚                      â”‚                           â”‚
  â”‚                   â”‚                      â”‚â”€â”€ch = '1'â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚
  â”‚                   â”‚                      â”‚â”€â”€enter_GotNumber()â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚
  â”‚                   â”‚                      â”‚   [stateID: GOTNUMBER]    â”‚
  â”‚                   â”‚                      â”‚                           â”‚
  â”‚                   â”‚                      â”‚â”€â”€enter_ProcessingWholePart()â–ºâ”‚
  â”‚                   â”‚                      â”‚   [subStateID: WHOLEPART] â”‚
  â”‚                   â”‚                      â”‚â”€â”€result = 0*10 + 1 = 1â”€â”€â”€â–ºâ”‚
  â”‚                   â”‚                      â”‚                           â”‚
  â”‚                   â”‚                      â”‚â—„â”€printf("Current: 1")â”€â”€â”€â”€â”€â”‚
  â”‚                   â”‚                      â”‚                           â”‚
  â”‚                   â”‚â—„â”€â”€â”€Mutex_release()â”€â”€â”‚ ğŸ”“ END CRITICAL SECTION  â”‚
  â”‚                   â”‚                      â”‚                           â”‚
  â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€returnâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                           â”‚
  â”‚                   â”‚                      â”‚                           â”‚

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ASYNCHRONOUS EVENT PROCESSING SEQUENCE
=======================================

Description: Event queue buffering with signal-based notification and task loop
processing. Events are posted to a queue and processed asynchronously.

Client          EventQueue          Mutex          OSSignal      AsyncReceptor         StateMachine
  â”‚                 â”‚                 â”‚                â”‚               â”‚                    â”‚
  â”‚                 â”‚                 â”‚                â”‚               â”‚                    â”‚
  â”‚ â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ INITIALIZATION â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º â”‚
  â”‚                 â”‚                 â”‚                â”‚               â”‚                    â”‚
  â”‚â”€â”€Create()â”€â”€â”€â”€â”€â”€â”€â”‚                 â”‚                â”‚               â”‚                    â”‚
  â”‚                 â”‚                 â”‚                â”‚               â”‚                    â”‚
  â”‚                 â”‚â”€â”€setItsMutex()â”€â–ºâ”‚                â”‚               â”‚                    â”‚
  â”‚                 â”‚                 â”‚                â”‚               â”‚                    â”‚
  â”‚                 â”‚                 â”‚                â”‚               â”‚â—„â”€â”€setItsTSREventQueue()
  â”‚                 â”‚                 â”‚                â”‚               â”‚                    â”‚
  â”‚ â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ EVENT POSTING â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º â”‚
  â”‚                 â”‚                 â”‚                â”‚               â”‚                    â”‚
  â”‚â”€â”€createEvent()â”€â”€â”‚                 â”‚                â”‚               â”‚                    â”‚
  â”‚                 â”‚                 â”‚                â”‚               â”‚                    â”‚
  â”‚â”€â”€post(event)â”€â”€â”€â–ºâ”‚                 â”‚                â”‚               â”‚                    â”‚
  â”‚                 â”‚                 â”‚                â”‚               â”‚                    â”‚
  â”‚                 â”‚â”€â”€Mutex_lock()â”€â”€â–ºâ”‚ ğŸ”’ QUEUE       â”‚               â”‚                    â”‚
  â”‚                 â”‚                 â”‚   PROTECTION   â”‚               â”‚                    â”‚
  â”‚                 â”‚â”€â”€enqueueâ”€â”€â”€â”€â”€â”€â”€â”€â”‚                â”‚               â”‚                    â”‚
  â”‚                 â”‚â”€â”€eventâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                â”‚               â”‚                    â”‚
  â”‚                 â”‚                 â”‚                â”‚               â”‚                    â”‚
  â”‚                 â”‚â”€â”€Mutex_release()â–ºâ”‚ ğŸ”“             â”‚               â”‚                    â”‚
  â”‚                 â”‚                 â”‚                â”‚               â”‚                    â”‚
  â”‚                 â”‚â”€â”€postSignal()â”€â”€â”€â”‚                â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚                    â”‚
  â”‚                 â”‚                 â”‚                â”‚   WAKE UP     â”‚                    â”‚
  â”‚                 â”‚                 â”‚                â”‚               â”‚                    â”‚
  â”‚ â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ ASYNCHRONOUS PROCESSING â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º â”‚
  â”‚                 â”‚                 â”‚                â”‚               â”‚                    â”‚
  â”‚                 â”‚                 â”‚                â”‚               â”‚â—„â”€â”€taskLoop()â”€â”€â”€â”€â”€â”€â”€â”‚
  â”‚                 â”‚                 â”‚                â”‚               â”‚                    â”‚
  â”‚                 â”‚                 â”‚                â”‚â—„â”€â”€waitOnSignal()â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
  â”‚                 â”‚                 â”‚                â”‚                â”‚                    â”‚
  â”‚                 â”‚â—„â”€â”€â”€isEmpty()â”€â”€â”€â”€â”‚                â”‚               â”‚                    â”‚
  â”‚                 â”‚                 â”‚                â”‚               â”‚                    â”‚
  â”‚                 â”‚â—„â”€â”€â”€pull()â”€â”€â”€â”€â”€â”€â”€â”‚                â”‚               â”‚                    â”‚
  â”‚                 â”‚                 â”‚                â”‚               â”‚                    â”‚
  â”‚                 â”‚â”€â”€Mutex_lock()â”€â”€â–ºâ”‚ ğŸ”’             â”‚               â”‚                    â”‚
  â”‚                 â”‚â”€â”€dequeueâ”€â”€â”€â”€â”€â”€â”€â”€â”‚                â”‚               â”‚                    â”‚
  â”‚                 â”‚â”€â”€Mutex_release()â–ºâ”‚ ğŸ”“             â”‚               â”‚                    â”‚
  â”‚                 â”‚                 â”‚                â”‚               â”‚                    â”‚
  â”‚                 â”‚â”€â”€return eventâ”€â”€â–ºâ”‚                â”‚               â”‚                    â”‚
  â”‚                 â”‚                 â”‚                â”‚               â”‚                    â”‚
  â”‚                 â”‚                 â”‚                â”‚               â”‚â”€â”€eventDispatch()â”€â”€â–ºâ”‚
  â”‚                 â”‚                 â”‚                â”‚               â”‚                    â”‚
  â”‚                 â”‚                 â”‚                â”‚               â”‚â”€â”€state processingâ”€â–ºâ”‚
  â”‚                 â”‚                 â”‚                â”‚               â”‚                    â”‚
  â”‚                 â”‚                 â”‚                â”‚               â”‚â—„â”€printf resultâ”€â”€â”€â”€â”‚
  â”‚                 â”‚                 â”‚                â”‚               â”‚                    â”‚
  â”‚                 â”‚                 â”‚                  â”‚                    â”‚
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

DETAILED STATE TRANSITION SEQUENCE
===================================

Example: Complete parsing of decimal number "123.45"

Client              SyncReceptor                 StateMachine              Output
  â”‚                     â”‚                           â”‚                       â”‚
  â”‚ â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ DIGIT PROCESSING â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º â”‚
  â”‚                     â”‚                           â”‚                       â”‚
  â”‚â”€â”€EVDIGIT('1')â”€â”€â”€â”€â”€â”€â–ºâ”‚                           â”‚                       â”‚
  â”‚                     â”‚â”€â”€[NONUMBER_STATE]â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚                       â”‚
  â”‚                     â”‚                           â”‚                       â”‚
  â”‚                     â”‚â”€â”€exit_NoNumber()â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚                       â”‚
  â”‚                     â”‚â”€â”€ch = '1'â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚                       â”‚
  â”‚                     â”‚â”€â”€enter_GotNumber()â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚                       â”‚
  â”‚                     â”‚â”€â”€stateID = GOTNUMBERâ”€â”€â”€â”€â”€â”€â–ºâ”‚                       â”‚
  â”‚                     â”‚â”€â”€enter_ProcessingWholePart()â–ºâ”‚                       â”‚
  â”‚                     â”‚â”€â”€subStateID = WHOLEPARTâ”€â”€â”€â–ºâ”‚                       â”‚
  â”‚                     â”‚â”€â”€result = 0*10 + 1 = 1â”€â”€â”€â–ºâ”‚                       â”‚
  â”‚                     â”‚                           â”‚â”€â”€printfâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚ "Current: 1"
  â”‚â—„â”€â”€â”€â”€â”€â”€returnâ”€â”€â”€â”€â”€â”€â”€â”‚                           â”‚                       â”‚
  â”‚                     â”‚                           â”‚                       â”‚
  â”‚â”€â”€EVDIGIT('2')â”€â”€â”€â”€â”€â”€â–ºâ”‚                           â”‚                       â”‚
  â”‚                     â”‚â”€â”€[GOTNUMBER_STATE]â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚                       â”‚
  â”‚                     â”‚â”€â”€[WHOLEPART_SSTATE]â”€â”€â”€â”€â”€â”€â–ºâ”‚                       â”‚
  â”‚                     â”‚â”€â”€exit_ProcessingWholePart()â–ºâ”‚                       â”‚
  â”‚                     â”‚â”€â”€ch = '2'â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚                       â”‚
  â”‚                     â”‚â”€â”€enter_ProcessingWholePart()â–ºâ”‚                       â”‚
  â”‚                     â”‚â”€â”€result = 1*10 + 2 = 12â”€â”€â–ºâ”‚                       â”‚
  â”‚                     â”‚                           â”‚â”€â”€printfâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚ "Current: 12"
  â”‚â—„â”€â”€â”€â”€â”€â”€returnâ”€â”€â”€â”€â”€â”€â”€â”‚                           â”‚                       â”‚
  â”‚                     â”‚                           â”‚                       â”‚
  â”‚â”€â”€EVDIGIT('3')â”€â”€â”€â”€â”€â”€â–ºâ”‚                           â”‚                       â”‚
  â”‚                     â”‚â”€â”€[GOTNUMBER_STATE]â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚                       â”‚
  â”‚                     â”‚â”€â”€[WHOLEPART_SSTATE]â”€â”€â”€â”€â”€â”€â–ºâ”‚                       â”‚
  â”‚                     â”‚â”€â”€exit_ProcessingWholePart()â–ºâ”‚                       â”‚
  â”‚                     â”‚â”€â”€ch = '3'â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚                       â”‚
  â”‚                     â”‚â”€â”€enter_ProcessingWholePart()â–ºâ”‚                       â”‚
  â”‚                     â”‚â”€â”€result = 12*10 + 3 = 123â–ºâ”‚                       â”‚
  â”‚                     â”‚                           â”‚â”€â”€printfâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚ "Current: 123"
  â”‚â—„â”€â”€â”€â”€â”€â”€returnâ”€â”€â”€â”€â”€â”€â”€â”‚                           â”‚                       â”‚
  â”‚                     â”‚                           â”‚                       â”‚
  â”‚ â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ DECIMAL POINT PROCESSING â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º â”‚
  â”‚                     â”‚                           â”‚                       â”‚
  â”‚â”€â”€EVDOT('.')â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚                           â”‚                       â”‚
  â”‚                     â”‚â”€â”€[GOTNUMBER_STATE]â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚                       â”‚
  â”‚                     â”‚â”€â”€[WHOLEPART_SSTATE]â”€â”€â”€â”€â”€â”€â–ºâ”‚                       â”‚
  â”‚                     â”‚â”€â”€exit_ProcessingWholePart()â–ºâ”‚                       â”‚
  â”‚                     â”‚â”€â”€ch = '.'â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚                       â”‚
  â”‚                     â”‚â”€â”€enter_ProcessingFractionalPart()â–ºâ”‚                 â”‚
  â”‚                     â”‚â”€â”€subStateID = FRACTIONALâ”€â”€â–ºâ”‚                       â”‚
  â”‚                     â”‚â”€â”€tensPlace = 0.1â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚                       â”‚
  â”‚â—„â”€â”€â”€â”€â”€â”€returnâ”€â”€â”€â”€â”€â”€â”€â”‚                           â”‚                       â”‚
  â”‚                     â”‚                           â”‚                       â”‚
  â”‚ â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ FRACTIONAL PART PROCESSING â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º â”‚
  â”‚                     â”‚                           â”‚                       â”‚
  â”‚â”€â”€EVDIGIT('4')â”€â”€â”€â”€â”€â”€â–ºâ”‚                           â”‚                       â”‚
  â”‚                     â”‚â”€â”€[GOTNUMBER_STATE]â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚                       â”‚
  â”‚                     â”‚â”€â”€[FRACTIONAL_SSTATE]â”€â”€â”€â”€â”€â–ºâ”‚                       â”‚
  â”‚                     â”‚â”€â”€exit_ProcessingFractionalPart()â–ºâ”‚                 â”‚
  â”‚                     â”‚â”€â”€ch = '4'â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚                       â”‚
  â”‚                     â”‚â”€â”€enter_ProcessingFractionalPart()â–ºâ”‚                 â”‚
  â”‚                     â”‚â”€â”€result += 4*0.1 = 123.4â”€â–ºâ”‚                       â”‚
  â”‚                     â”‚â”€â”€tensPlace = 0.01â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚                       â”‚
  â”‚                     â”‚                           â”‚â”€â”€printfâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚ "Current: 123.4"
  â”‚â—„â”€â”€â”€â”€â”€â”€returnâ”€â”€â”€â”€â”€â”€â”€â”‚                           â”‚                       â”‚
  â”‚                     â”‚                           â”‚                       â”‚
  â”‚â”€â”€EVDIGIT('5')â”€â”€â”€â”€â”€â”€â–ºâ”‚                           â”‚                       â”‚
  â”‚                     â”‚â”€â”€[GOTNUMBER_STATE]â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚                       â”‚
  â”‚                     â”‚â”€â”€[FRACTIONAL_SSTATE]â”€â”€â”€â”€â”€â–ºâ”‚                       â”‚
  â”‚                     â”‚â”€â”€exit_ProcessingFractionalPart()â–ºâ”‚                 â”‚
  â”‚                     â”‚â”€â”€ch = '5'â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚                       â”‚
  â”‚                     â”‚â”€â”€enter_ProcessingFractionalPart()â–ºâ”‚                 â”‚
  â”‚                     â”‚â”€â”€result += 5*0.01 = 123.45â–ºâ”‚                       â”‚
  â”‚                     â”‚â”€â”€tensPlace = 0.001â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚                       â”‚
  â”‚                     â”‚                           â”‚â”€â”€printfâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚ "Current: 123.45"
  â”‚â—„â”€â”€â”€â”€â”€â”€returnâ”€â”€â”€â”€â”€â”€â”€â”‚                           â”‚                       â”‚
  â”‚                     â”‚                           â”‚                       â”‚
  â”‚ â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ NUMBER COMPLETION â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º â”‚
  â”‚                     â”‚                           â”‚                       â”‚
  â”‚â”€â”€EVWHITESPACEâ”€â”€â”€â”€â”€â”€â–ºâ”‚                           â”‚                       â”‚
  â”‚                     â”‚â”€â”€[GOTNUMBER_STATE]â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚                       â”‚
  â”‚                     â”‚â”€â”€exit_ProcessingFractionalPart()â–ºâ”‚                 â”‚
  â”‚                     â”‚â”€â”€exit_GotNumber()â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚                       â”‚
  â”‚                     â”‚                           â”‚â”€â”€printfâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚ "Number: 123.45"
  â”‚                     â”‚â”€â”€enter_NoNumber()â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚                       â”‚
  â”‚                     â”‚â”€â”€stateID = NONUMBERâ”€â”€â”€â”€â”€â”€â”€â–ºâ”‚                       â”‚
  â”‚                     â”‚â”€â”€reset result = 0â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚                       â”‚
  â”‚â—„â”€â”€â”€â”€â”€â”€returnâ”€â”€â”€â”€â”€â”€â”€â”‚                           â”‚                       â”‚

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

CONCURRENT ACCESS PROTECTION SEQUENCE
======================================

Scenario: Multiple clients posting events simultaneously to async queue

Client1         Client2         EventQueue        Mutex           AsyncReceptor
  â”‚               â”‚                 â”‚               â”‚                   â”‚
  â”‚ â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ CONCURRENT EVENT POSTING â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º â”‚
  â”‚               â”‚                 â”‚               â”‚                   â”‚
  â”‚â”€â”€post(ev1)â”€â”€â”€â–ºâ”‚                 â”‚               â”‚                   â”‚
  â”‚               â”‚â”€â”€post(ev2)â”€â”€â”€â”€â”€â–ºâ”‚               â”‚                   â”‚
  â”‚               â”‚                 â”‚               â”‚                   â”‚
  â”‚               â”‚                 â”‚â”€â”€lock()â”€â”€â”€â”€â”€â”€â–ºâ”‚ ğŸ”’ Client1       â”‚
  â”‚               â”‚                 â”‚â”€â”€enqueue(ev1)â”€â”‚   Protected      â”‚
  â”‚               â”‚                 â”‚â”€â”€release()â”€â”€â”€â–ºâ”‚ ğŸ”“               â”‚
  â”‚               â”‚                 â”‚â”€â”€postSignal()â”€â”‚                   â”‚
  â”‚               â”‚                 â”‚               â”‚                   â”‚
  â”‚               â”‚                 â”‚â”€â”€lock()â”€â”€â”€â”€â”€â”€â–ºâ”‚ ğŸ”’ Client2       â”‚
  â”‚               â”‚                 â”‚â”€â”€enqueue(ev2)â”€â”‚   Protected      â”‚
  â”‚               â”‚                 â”‚â”€â”€release()â”€â”€â”€â–ºâ”‚ ğŸ”“               â”‚
  â”‚               â”‚                 â”‚â”€â”€postSignal()â”€â”‚                   â”‚
  â”‚               â”‚                 â”‚               â”‚                   â”‚
  â”‚ â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ ASYNCHRONOUS CONSUMPTION â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º â”‚
  â”‚               â”‚                 â”‚               â”‚                   â”‚
  â”‚               â”‚                 â”‚               â”‚                   â”‚â—„â”€â”€taskLoop()
  â”‚               â”‚                 â”‚               â”‚                   â”‚
  â”‚               â”‚                 â”‚â—„â”€â”€isEmpty()â”€â”€â”‚                   â”‚
  â”‚               â”‚                 â”‚â”€â”€return falseâ”€â–ºâ”‚                   â”‚
  â”‚               â”‚                 â”‚               â”‚                   â”‚
  â”‚               â”‚                 â”‚â—„â”€â”€pull()â”€â”€â”€â”€â”€â”‚                   â”‚
  â”‚               â”‚                 â”‚â”€â”€lock()â”€â”€â”€â”€â”€â”€â–ºâ”‚ ğŸ”’ Dequeue       â”‚
  â”‚               â”‚                 â”‚â”€â”€dequeue(ev1)â”€â”‚   Protection     â”‚
  â”‚               â”‚                 â”‚â”€â”€release()â”€â”€â”€â–ºâ”‚ ğŸ”“               â”‚
  â”‚               â”‚                 â”‚â”€â”€return ev1â”€â”€â–ºâ”‚                   â”‚
  â”‚               â”‚                 â”‚               â”‚                   â”‚
  â”‚               â”‚                 â”‚               â”‚                   â”‚â”€â”€process(ev1)
  â”‚               â”‚                 â”‚               â”‚                   â”‚
  â”‚               â”‚                 â”‚â—„â”€â”€pull()â”€â”€â”€â”€â”€â”‚                   â”‚
  â”‚               â”‚                 â”‚â”€â”€lock()â”€â”€â”€â”€â”€â”€â–ºâ”‚ ğŸ”’ Dequeue       â”‚
  â”‚               â”‚                 â”‚â”€â”€dequeue(ev2)â”€â”‚   Protection     â”‚
  â”‚               â”‚                 â”‚â”€â”€release()â”€â”€â”€â–ºâ”‚ ğŸ”“               â”‚
  â”‚               â”‚                 â”‚â”€â”€return ev2â”€â”€â–ºâ”‚                   â”‚
  â”‚               â”‚                 â”‚               â”‚                   â”‚
  â”‚               â”‚                 â”‚               â”‚                   â”‚â”€â”€process(ev2)

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

MEMORY MANAGEMENT SEQUENCE
==========================

Object Lifecycle: Creation, Usage, and Destruction following RAII pattern

Client                  Factory                 Object               Mutex
  â”‚                       â”‚                       â”‚                    â”‚
  â”‚ â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ CREATION PHASE â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º â”‚
  â”‚                       â”‚                       â”‚                    â”‚
  â”‚â”€â”€Create()â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚                       â”‚                    â”‚
  â”‚                       â”‚â”€â”€malloc()â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚                    â”‚
  â”‚                       â”‚                       â”‚                    â”‚
  â”‚                       â”‚â”€â”€Init()â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚                    â”‚
  â”‚                       â”‚                       â”‚â”€â”€Mutex_Create()â”€â”€â”€â–ºâ”‚
  â”‚                       â”‚                       â”‚                    â”‚
  â”‚                       â”‚                       â”‚â—„â”€â”€return mutexâ”€â”€â”€â”€â”‚
  â”‚                       â”‚                       â”‚                    â”‚
  â”‚â—„â”€â”€return objectâ”€â”€â”€â”€â”€â”€â”‚                       â”‚                    â”‚
  â”‚                       â”‚                       â”‚                    â”‚
  â”‚ â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ USAGE PHASE â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º â”‚
  â”‚                       â”‚                       â”‚                    â”‚
  â”‚â”€â”€setItsMutex()â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚                    â”‚
  â”‚â”€â”€eventDispatch()â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚                    â”‚
  â”‚                       â”‚                       â”‚                    â”‚
  â”‚ â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ DESTRUCTION PHASE â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º â”‚
  â”‚                       â”‚                       â”‚                    â”‚
  â”‚â”€â”€Destroy()â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚                    â”‚
  â”‚                                                 â”‚                    â”‚
  â”‚                                                 â”‚â”€â”€Cleanup()â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚
  â”‚                                                 â”‚                    â”‚
  â”‚                                                 â”‚â”€â”€Mutex_Destroy()â”€â–ºâ”‚
  â”‚                                                 â”‚                    â”‚
  â”‚                                                 â”‚â”€â”€free()â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚
  â”‚                                                 â”‚                    â”‚

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

PATTERN BENEFITS DEMONSTRATED
==============================

1. SINGLE POINT OF CONTROL:
   - All events funnel through one eventDispatch() method
   - Consistent event handling logic regardless of event type

2. THREAD SAFETY:
   - Mutex protection in synchronous version
   - Queue synchronization in asynchronous version

3. FLEXIBILITY:
   - Same state machine logic works for both sync and async
   - Easy to switch between processing modes

4. SCALABILITY:
   - Can handle multiple concurrent clients
   - Event buffering prevents event loss

5. MAINTAINABILITY:
   - Clear separation of concerns
   - RAII memory management pattern
   - Consistent API across both versions
  â”‚                     â”‚â”€â”€result = 12*10 + 3 = 123â–ºâ”‚
  â”‚                     â”‚â—„â”€printf("Current: 123")â”€â”€â”€â”‚
  â”‚â—„â”€â”€â”€â”€â”€â”€returnâ”€â”€â”€â”€â”€â”€â”€â”‚                           â”‚
  â”‚                     â”‚                           â”‚
  â”‚â”€â”€EVWHITESPACEâ”€â”€â”€â”€â”€â”€â–ºâ”‚                           â”‚
  â”‚                     â”‚â”€â”€GOTNUMBER_STATEâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚
  â”‚                     â”‚â”€â”€exit_ProcessingWholePart()â–ºâ”‚
  â”‚                     â”‚â”€â”€exit_GotNumber()â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚
  â”‚                     â”‚â—„â”€printf("Number: 123")â”€â”€â”€â”‚
  â”‚                     â”‚â”€â”€enter_NoNumber()â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚
  â”‚                     â”‚â”€â”€stateID = NONUMBER_STATEâ–ºâ”‚
  â”‚â—„â”€â”€â”€â”€â”€â”€returnâ”€â”€â”€â”€â”€â”€â”€â”‚                           â”‚

FRACTIONAL NUMBER PROCESSING (Example: "12.34")
===============================================

Event          State Transition                    Result
â”€â”€â”€â”€â”€â”€         â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                  â”€â”€â”€â”€â”€â”€
EVDIGIT('1')   NONUMBER â†’ GOTNUMBER/WHOLEPART     result = 1
EVDIGIT('2')   GOTNUMBER/WHOLEPART (stay)         result = 12
EVDOT('.')     GOTNUMBER/WHOLEPART â†’ FRACTIONAL   result = 12
EVDIGIT('3')   GOTNUMBER/FRACTIONAL (stay)        result = 12.3
EVDIGIT('4')   GOTNUMBER/FRACTIONAL (stay)        result = 12.34
EVWHITESPACE   GOTNUMBER â†’ NONUMBER               Number: 12.34

MEMORY MANAGEMENT SEQUENCE
==========================

Client                  Factory                 Object               Mutex
  â”‚                       â”‚                       â”‚                    â”‚
  â”‚â”€â”€Create()â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚                       â”‚                    â”‚
  â”‚                       â”‚â”€â”€malloc()â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚                    â”‚
  â”‚                       â”‚                       â”‚                    â”‚
  â”‚                       â”‚â”€â”€Init()â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚                    â”‚
  â”‚                       â”‚                       â”‚                    â”‚
  â”‚                       â”‚                       â”‚â”€â”€Mutex_Create()â”€â”€â”€â–ºâ”‚
  â”‚                       â”‚                       â”‚                    â”‚
  â”‚                       â”‚                       â”‚â—„â”€â”€return mutexâ”€â”€â”€â”€â”‚
  â”‚                       â”‚                       â”‚                    â”‚
  â”‚â—„â”€â”€return objectâ”€â”€â”€â”€â”€â”€â”‚                       â”‚                    â”‚
  â”‚                       â”‚                       â”‚                    â”‚
  â”‚                                                                    â”‚
  â”‚                    [Object Usage]                                  â”‚
  â”‚                                                                    â”‚
  â”‚â”€â”€Destroy()â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚                    â”‚
  â”‚                                                 â”‚                    â”‚
  â”‚                                                 â”‚â”€â”€Cleanup()â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚
  â”‚                                                 â”‚                    â”‚
  â”‚                                                 â”‚â”€â”€Mutex_Destroy()â”€â–ºâ”‚
  â”‚                                                 â”‚                    â”‚
  â”‚                                                 â”‚â”€â”€free()â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚
  â”‚                                                 â”‚                    â”‚

CONCURRENT ACCESS PROTECTION (Asynchronous)
===========================================

Client1         Client2         EventQueue        Mutex           AsyncReceptor
  â”‚               â”‚                 â”‚               â”‚                   â”‚
  â”‚â”€â”€post(ev1)â”€â”€â”€â–ºâ”‚                 â”‚               â”‚                   â”‚
  â”‚               â”‚â”€â”€post(ev2)â”€â”€â”€â”€â”€â–ºâ”‚               â”‚                   â”‚
  â”‚               â”‚                 â”‚               â”‚                   â”‚
  â”‚               â”‚                 â”‚â”€â”€lock()â”€â”€â”€â”€â”€â”€â–ºâ”‚                   â”‚
  â”‚               â”‚                 â”‚â”€â”€enqueue(ev1)â”€â”‚                   â”‚
  â”‚               â”‚                 â”‚â”€â”€release()â”€â”€â”€â–ºâ”‚                   â”‚
  â”‚               â”‚                 â”‚â”€â”€postSignal()â”€â”‚                   â”‚
  â”‚               â”‚                 â”‚               â”‚                   â”‚
  â”‚               â”‚                 â”‚â”€â”€lock()â”€â”€â”€â”€â”€â”€â–ºâ”‚                   â”‚
  â”‚               â”‚                 â”‚â”€â”€enqueue(ev2)â”€â”‚                   â”‚
  â”‚               â”‚                 â”‚â”€â”€release()â”€â”€â”€â–ºâ”‚                   â”‚
  â”‚               â”‚                 â”‚â”€â”€postSignal()â”€â”‚                   â”‚
  â”‚               â”‚                 â”‚               â”‚                   â”‚
  â”‚               â”‚                 â”‚               â”‚                   â”‚â—„â”€â”€taskLoop()
  â”‚               â”‚                 â”‚               â”‚                   â”‚
  â”‚               â”‚                 â”‚â—„â”€â”€pull()â”€â”€â”€â”€â”€â”‚                   â”‚
  â”‚               â”‚                 â”‚â”€â”€lock()â”€â”€â”€â”€â”€â”€â–ºâ”‚                   â”‚
  â”‚               â”‚                 â”‚â”€â”€dequeue(ev1)â”€â”‚                   â”‚
  â”‚               â”‚                 â”‚â”€â”€release()â”€â”€â”€â–ºâ”‚                   â”‚
  â”‚               â”‚                 â”‚â”€â”€return ev1â”€â”€â–ºâ”‚                   â”‚
  â”‚               â”‚                 â”‚               â”‚                   â”‚
  â”‚               â”‚                 â”‚               â”‚                   â”‚â”€â”€process(ev1)
  â”‚               â”‚                 â”‚               â”‚                   â”‚
  â”‚               â”‚                 â”‚â—„â”€â”€pull()â”€â”€â”€â”€â”€â”‚                   â”‚
  â”‚               â”‚                 â”‚â”€â”€lock()â”€â”€â”€â”€â”€â”€â–ºâ”‚                   â”‚
  â”‚               â”‚                 â”‚â”€â”€dequeue(ev2)â”€â”‚                   â”‚
  â”‚               â”‚                 â”‚â”€â”€release()â”€â”€â”€â–ºâ”‚                   â”‚
  â”‚               â”‚                 â”‚â”€â”€return ev2â”€â”€â–ºâ”‚                   â”‚
  â”‚               â”‚                 â”‚               â”‚                   â”‚
  â”‚               â”‚                 â”‚               â”‚                   â”‚â”€â”€process(ev2)
